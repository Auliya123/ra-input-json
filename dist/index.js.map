{"version":3,"sources":["../src/index.js"],"names":["RaJSONEditor","renderTextField","input","label","meta","touched","error","custom","props","source","width","labelStyle","required","rest","changeHandler","json","jsObject","onChange","JSON","stringify","viewOnly","uniqueId","record","parse","locale","React","Component","propTypes","PropTypes","string","isRequired","className","JSONEView","JSONEditor"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA,Y;;;;;;;;;;;;;;kMAqBJC,e,GAAkB,iBAA2D;AAAA,UAAxDC,KAAwD,SAAxDA,KAAwD;AAAA,UAAjDC,KAAiD,SAAjDA,KAAiD;AAAA,6BAA1CC,IAA0C;AAAA,UAAlCC,OAAkC,cAAlCA,OAAkC;AAAA,UAAzBC,KAAyB,cAAzBA,KAAyB;AAAA,UAAbC,MAAa;;AAAA,wBAOvE,MAAKC,KAPkE;AAAA,UAEzEC,MAFyE,eAEzEA,MAFyE;AAAA,UAGzEC,KAHyE,eAGzEA,KAHyE;AAAA,UAIzEC,UAJyE,eAIzEA,UAJyE;AAAA,UAKzEC,QALyE,eAKzEA,QALyE;AAAA,UAMtEC,IANsE;;AAQ3E,aACM,8BAAC,mBAAD;AACA,eAAOV,KADP;AAEA,eAAO,CAAC,EAAEE,WAAWC,KAAb,CAFR;AAGA,oBAAYD,WAAWC;AAHvB,SAIIJ,KAJJ,EAKIK,MALJ,EADN;AASD,K,QAEDO,a,GAAgB;AAAA,aAAY,iBAA6B;AAAA,YAA3BC,IAA2B,SAA3BA,IAA2B;AAAA,YAArBT,KAAqB,SAArBA,KAAqB;AAAA,YAAdU,QAAc,SAAdA,QAAc;;AACvDV,kBAAU,KAAV,IAAmBW,SAASD,WAAWE,KAAKC,SAAL,CAAeH,QAAf,CAAX,GAAsC,EAA/C,CAAnB;AACD,OAFe;AAAA,K;;;;;6BAvCR;AAAA,mBAIF,KAAKR,KAJH;AAAA,UAEJC,MAFI,UAEJA,MAFI;AAAA,UAGDI,IAHC;;AAKN,aACE;AAAA;AAAA;AACGA,aAAKO,QAAL,GAAiB,8BAAC,6BAAD;AACZ,cAASC,gBAAT,eADY;AAEZ,uBAAiBR,KAAKS,MAAL,CAAYb,MAAZ,KAAuBS,KAAKK,KAAL,CAAWV,KAAKS,MAAL,CAAYb,MAAZ,CAAX,CAAxB,IAA4D,IAFhE;AAGZ,iBAAQ,yBAHI;AAIZ,kBAAWe,YAJC;AAKZ,kBAAS,OALG;AAMZ,iBAAM;AANM,WAORX,IAPQ,EAAjB,GAQU,8BAAC,gBAAD,aAAO,MAAMJ,MAAb,EAAqB,WAAW,KAAKR,eAArC,EAAuD,OAAM,YAA7D,IAA8EY,IAA9E;AATb,OADF;AAaD;;;;EAnBwBY,gBAAMC,S;;AA8CjC1B,aAAa2B,SAAb,GAAyB;AACvBlB,UAAQmB,oBAAUC,MAAV,CAAiBC,UADF;AAEvB3B,SAAOyB,oBAAUC,MAFM;AAGvBE,aAAWH,oBAAUC;AAHE,CAAzB;;AAMO,IAAMG,gCAAY,4BAAa,EAACZ,UAAU,IAAX,EAAb,EAA+BpB,YAA/B,CAAlB;AACA,IAAMiC,kCAAa,sBAASjC,YAAT,CAAnB;;AAEN,CAAC;;;;;;;;;;;;;;;;;yBAiBwB","file":"index.js","sourcesContent":["import React from 'react';\nimport JSONInput from 'react-json-editor-ajrm';\nimport locale    from 'react-json-editor-ajrm/locale/en';\nimport { Field } from 'redux-form';\nimport uniqueId from 'lodash.uniqueid'\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport defaultProps from 'recompose/defaultProps'\nimport PropTypes from 'prop-types';\nimport { addField } from 'ra-core';\n\nclass RaJSONEditor extends React.Component {\n  render(){\n    const {\n      source,\n      ...rest\n    } = this.props;\n    return (\n      <div>\n        {rest.viewOnly ? (<JSONInput\n              id = {`${uniqueId}-outer-box`}\n              placeholder = { (rest.record[source] && JSON.parse(rest.record[source])) || null}\n              theme = \"light_mitsuketa_tribute\"\n              locale = { locale }\n              height = '250px'\n              width=\"100%\"\n              {...rest}\n            />) : (<Field name={source} component={this.renderTextField}  label=\"jsonEditor\" {...rest} />)}\n      </div>\n    )\n  }\n\n  renderTextField = ({ input, label, meta: { touched, error }, ...custom }) => {\n    const {\n      source,\n      width,\n      labelStyle,\n      required,\n      ...rest\n    } = this.props;\n    return (\n          <TextField\n          label={label}\n          error={!!(touched && error)}\n          helperText={touched && error}\n          {...input}\n          {...custom}\n      />\n    );\n  }\n\n  changeHandler = onChange => ({json, error, jsObject}) => {\n    error === false && onChange(jsObject ? JSON.stringify(jsObject) : '');\n  }\n\n}\n\nRaJSONEditor.propTypes = {\n  source: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  className: PropTypes.string,\n}\n\nexport const JSONEView = defaultProps({viewOnly: true})(RaJSONEditor);\nexport const JSONEditor = addField(RaJSONEditor);\n\n {/*      <React.Fragment>\n        <Typography component=\"span\" style={labelStyle || {marginTop: \"8px\", marginBottom: \"8px\", color: \"#919191\", fontSize: \".8e\", lineHeight: \"1em\"}}>\n        {label} {required && \" *\"}\n        </Typography> \n          <Paper style={{width: width || \"50%\"}}>\n            <JSONInput\n              id = {`${uniqueId}-outer-box`}\n              placeholder = { (input.value && JSON.parse(input.value)) || null}\n              theme = \"light_mitsuketa_tribute\"\n              locale = { locale }\n              height = '250px'\n              width=\"100%\"\n              onChange={this.changeHandler(input.onChange)}\n              onKeyPressUpdate={false}\n              {...rest}\n            />\n          </Paper>\n      </React.Fragment>*/}"]}